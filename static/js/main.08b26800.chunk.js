(this["webpackJsonptestovoe-autopiter"]=this["webpackJsonptestovoe-autopiter"]||[]).push([[0],{28:function(e,s,t){},29:function(e,s,t){},30:function(e,s,t){},31:function(e,s,t){},32:function(e,s,t){},33:function(e,s,t){},34:function(e,s,t){},35:function(e,s,t){},40:function(e,s,t){"use strict";t.r(s);var a=t(0),n=t(1),c=t.n(n),l=t(20),r=t.n(l),i=t(9),u=(t(28),t(7)),o=t(2);t(29),t(30);function d(){return Object(a.jsx)("header",{className:"header",children:Object(a.jsx)("a",{href:"https://autopiter.ru/",className:"header__logo",target:"_blank",rel:"noreferrer"})})}t(31);var j=t(21),g=t.n(j);t(32),t(33);function m(e){var s=e.data,t=e.setResult,n=e.setIsInputFocused;return Object(a.jsxs)("div",{className:"suggestion",onClick:function(){t(s),n(!1)},children:[Object(a.jsx)("h3",{className:"suggestion__name",children:s.value}),Object(a.jsxs)("p",{className:"suggestion__info",children:[s.data.inn," ",s.data.address.data.region_with_type]})]})}function _(e){var s=e.fetchSuggestions,t=e.suggestions,n=e.setResult,l=e.isInputFocused,r=e.setIsInputFocused,i=c.a.useRef(),o=g()((function(){return s(i.current.value)}),200),d=c.a.useState(-1),j=Object(u.a)(d,2),_=j[0],b=j[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{className:"orgs__search",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435, \u0418\u041d\u041d \u0438\u043b\u0438 \u0430\u0434\u0440\u0435\u0441 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438",type:"text",ref:i,onChange:o,maxLength:"300",autoComplete:"off",id:"input",onKeyDown:function(e){if(r(!0),"ArrowDown"===e.key&&(e.preventDefault(),t.length>0&&l&&_<4)){var s=_+1;s>0?(document.getElementsByClassName("suggestion")[s-1].classList.toggle("suggestion_hover"),document.getElementsByClassName("suggestion")[s].classList.toggle("suggestion_hover"),b(s)):(document.getElementsByClassName("suggestion")[s].classList.toggle("suggestion_hover"),b(s))}if("ArrowUp"===e.key&&(e.preventDefault(),t.length>0&&l&&_>0)){var a=_-1;a<4?(document.getElementsByClassName("suggestion")[a+1].classList.toggle("suggestion_hover"),document.getElementsByClassName("suggestion")[a].classList.toggle("suggestion_hover"),b(a)):(document.getElementsByClassName("suggestion")[a].classList.toggle("suggestion_hover"),b(a))}"Enter"===e.key&&(e.preventDefault(),_>=0&&_<=4&&(n(t[_]),r(!1),b(-1)))}}),t.length>0&&l&&Object(a.jsx)("div",{className:"orgs__suggestions",children:t.slice(0,5).map((function(e,s){return Object(a.jsx)(m,{data:e,setResult:n,setIsInputFocused:r},s)}))})]})}var b=t.p+"static/media/plus_sign.d5763053.svg",p=t(17),v=(t(34),t.p+"static/media/ok-sign.e7e20d18.svg");function h(e){var s=e.result,t=e.setSavedResults,n=e.savedResults,l=c.a.useState(!1),r=Object(u.a)(l,2),i=r[0],o=r[1];return c.a.useEffect((function(){o(!1),n.map((function(e){return e.data.inn===s.data.inn&&o(!0)}))}),[]),Object(a.jsxs)("div",{className:"orgs__result",children:[Object(a.jsx)("h2",{className:"result__name",children:s.value}),Object(a.jsxs)("div",{className:"result__container",children:[Object(a.jsxs)("div",{className:"result__data-container",children:[Object(a.jsxs)("div",{className:"result__data",children:[Object(a.jsx)("h3",{className:"result__data-title",children:"\u042e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0430\u0434\u0440\u0435\u0441"}),Object(a.jsx)("p",{className:"result__data-value",children:s.data.address.unrestricted_value})]}),Object(a.jsxs)("div",{className:"result__data",children:[Object(a.jsx)("h3",{className:"result__data-title",children:"INDIVIDUAL"!==s.data.type?s.data.management.post.charAt(0)+s.data.management.post.slice(1).toLowerCase():s.data.opf.full}),Object(a.jsx)("p",{className:"result__data-value",children:"INDIVIDUAL"!==s.data.type?s.data.management.name:s.data.name.full})]}),i?Object(a.jsxs)("button",{type:"button",className:"result__save-btn result__save-btn_saved",children:[Object(a.jsx)("img",{src:v,alt:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043e"})," \u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043e"]}):Object(a.jsx)("button",{type:"button",className:"result__save-btn",onClick:function(){t([].concat(Object(p.a)(n),[s])),localStorage.removeItem("saved"),localStorage.setItem("saved",JSON.stringify([].concat(Object(p.a)(n),[s]))),o(!0)},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(a.jsxs)("div",{className:"result__numbers",children:[Object(a.jsxs)("p",{className:"result__number",children:[Object(a.jsx)("span",{className:"result__number result__number_span",children:"\u0418\u041d\u041d"}),s.data.inn]}),s.data.kpp&&Object(a.jsxs)("p",{className:"result__number",children:[Object(a.jsx)("span",{className:"result__number result__number_span",children:"\u041a\u041f\u041f"}),s.data.kpp]}),Object(a.jsxs)("p",{className:"result__number",children:[Object(a.jsx)("span",{className:"result__number result__number_span",children:"\u041e\u0413\u0420\u041d"}),s.data.ogrn]})]})]})]})}t(35);var O=t.p+"static/media/arrow-up.cd00e8cb.svg",f=t.p+"static/media/arrow-down.464346d5.svg";function x(e){var s=e.org,t=e.setSavedResults,n=e.savedResults,l=c.a.useState(!1),r=Object(u.a)(l,2),i=r[0],o=r[1];function d(){o(!i)}return Object(a.jsxs)("div",{className:"saved-result",children:[Object(a.jsx)("h3",{className:"saved-result__name",children:s.value}),Object(a.jsxs)("div",{className:"saved-result__data-container",children:[Object(a.jsxs)("p",{className:"saved-result__data",children:[Object(a.jsx)("span",{className:"saved-result__data_span",children:"\u0418\u041d\u041d"}),s.data.inn]}),i&&Object(a.jsxs)(a.Fragment,{children:[s.data.kpp&&Object(a.jsxs)("p",{className:"saved-result__data",children:[Object(a.jsx)("span",{className:"saved-result__data_span",children:"\u041a\u041f\u041f"}),s.data.kpp]}),Object(a.jsxs)("p",{className:"saved-result__data",children:[Object(a.jsx)("span",{className:"saved-result__data_span",children:"\u041e\u0413\u0420\u041d"}),s.data.ogrn]}),Object(a.jsxs)("p",{className:"saved-result__data",children:[Object(a.jsx)("span",{className:"saved-result__data_span",children:"\u042e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0430\u0434\u0440\u0435\u0441"}),s.data.address.unrestricted_value]}),Object(a.jsxs)("p",{className:"saved-result__data",children:[Object(a.jsx)("span",{className:"saved-result__data_span",children:"INDIVIDUAL"!==s.data.type?s.data.management.post.charAt(0)+s.data.management.post.slice(1).toLowerCase():s.data.opf.full}),"INDIVIDUAL"!==s.data.type?s.data.management.name:s.data.name.full]})]})]}),Object(a.jsx)("button",{type:"button",className:"saved-result__delete-btn",onClick:function(){t((function(e){return e.filter((function(e){return e.data.inn!==s.data.inn}))}));var e=n.filter((function(e){return e.data.inn!==s.data.inn}));localStorage.setItem("saved",JSON.stringify(e))}}),i?Object(a.jsxs)("button",{type:"button",className:"saved-result__details-btn",onClick:d,children:["\u0441\u043a\u0440\u044b\u0442\u044c \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u043e\u0441\u0442\u0438",Object(a.jsx)("img",{src:O,alt:"\u0441\u043a\u0440\u044b\u0442\u044c \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u043e\u0441\u0442\u0438",className:"saved-result__details-icon"})]}):Object(a.jsxs)("button",{type:"button",className:"saved-result__details-btn",onClick:d,children:["\u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435",Object(a.jsx)("img",{src:f,alt:"\u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435",className:"saved-result__details-icon"})]})]})}function N(e){var s=e.fetchSuggestions,t=e.result,n=e.suggestions,c=e.setResult,l=e.setSuggestions,r=e.setIsInputFocused,u=e.isInputFocused,d=e.setSavedResults,j=e.savedResults;return Object(a.jsxs)("main",{className:"main",children:[Object(a.jsx)("h1",{className:"main__title",children:"\u041c\u043e\u0438 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438"}),Object(a.jsxs)("section",{className:"main__container",children:[Object(a.jsxs)("nav",{className:"navigation",children:[Object(a.jsx)(i.b,{exact:!0,to:"/",className:"navigation__link",activeClassName:"navigation__link navigation__link_active",onClick:function(){"/"!==window.location.pathname&&c({}),l([])},children:"\u041d\u043e\u0432\u0430\u044f \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(a.jsxs)(i.b,{to:"/saved",className:"navigation__link",activeClassName:"navigation__link navigation__link_active",children:["\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438 (",j.length,")"]})]}),Object(a.jsxs)(o.c,{children:[Object(a.jsx)(o.a,{exact:!0,path:"/",children:Object(a.jsxs)("div",{className:"orgs",children:[Object(a.jsx)("h3",{className:"orgs__title",children:"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f \u0438\u043b\u0438 \u0418\u041f"}),Object(a.jsx)(_,{fetchSuggestions:s,suggestions:n,setResult:c,setIsInputFocused:r,isInputFocused:u}),function(e){for(var s in e)if(e.hasOwnProperty(s))return!1;return!0}(t)?Object(a.jsxs)("div",{className:"orgs__no-results",children:[Object(a.jsx)("img",{src:b,alt:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0439 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438",className:"orgs__add-org-icon"}),Object(a.jsx)("p",{className:"orgs__add-org-text",children:"\u0414\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043d\u043e\u0432\u043e\u0439 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0435\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435, \u0418\u041d\u041d \u0438\u043b\u0438 \u0430\u0434\u0440\u0435\u0441."})]}):Object(a.jsx)(h,{result:t,setSavedResults:d,savedResults:j})]})}),Object(a.jsx)(o.a,{path:"/saved",children:Object(a.jsx)("div",{className:"orgs",children:j.map((function(e,s){return Object(a.jsx)(x,{org:e,setSavedResults:d,savedResults:j},s)}))})})]})]})]})}var I=Object(o.f)((function(){var e=c.a.useState({}),s=Object(u.a)(e,2),t=s[0],n=s[1],l=c.a.useState([]),r=Object(u.a)(l,2),i=r[0],o=r[1],j=c.a.useState(!1),g=Object(u.a)(j,2),m=g[0],_=g[1],b=c.a.useState([]),p=Object(u.a)(b,2),v=p[0],h=p[1];return c.a.useEffect((function(){var e=function(e){e.target.classList.contains("orgs__search")||e.target.classList.contains("suggestion")||e.target.parentElement.classList.contains("suggestion")?_(!0):_(!1)};return document.getElementById("app").addEventListener("click",e),function(){return document.getElementById("app").removeEventListener("click",e)}}),[m]),c.a.useEffect((function(){localStorage.getItem("saved")&&h(JSON.parse(localStorage.getItem("saved")))}),[]),Object(a.jsxs)("div",{className:"app",id:"app",children:[Object(a.jsx)(d,{}),Object(a.jsx)(N,{isRouteSaved:!1,savedResults:v,setSavedResults:h,fetchSuggestions:function(e){var s={method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Token 2a20a4f21d4938545a386b96e095f8a2c7eb272a"},body:JSON.stringify({query:e})};fetch("https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/party",s).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status," ").concat(e.statusText))})).then((function(e){return o(e.suggestions)})).catch((function(e){return console.log("error",e)}))},result:t,setResult:n,suggestions:i,setSuggestions:o,isInputFocused:m,setIsInputFocused:_})]})}));r.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(i.a,{children:Object(a.jsx)(I,{})})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.08b26800.chunk.js.map